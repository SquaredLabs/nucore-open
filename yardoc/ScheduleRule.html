<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: ScheduleRule
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "ScheduleRule";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (S)</a> &raquo;
    
    
    <span class="title">ScheduleRule</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: ScheduleRule
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">ActiveRecord::Base</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActiveRecord::Base</li>
          
            <li class="next">ScheduleRule</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>app/models/schedule_rule.rb</dd>
  </dl>
  
</div>





  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#unavailable-instance_method" title="#unavailable (instance method)">#<strong>unavailable</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>virtual attribute.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#as_calendar_objects-class_method" title="as_calendar_objects (class method)">.<strong>as_calendar_objects</strong>(schedule_rules, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a single array of calendar objects representing the set of
schedule_rules.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#available_to_user-class_method" title="available_to_user (class method)">.<strong>available_to_user</strong>(user)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cover%3F-class_method" title="cover? (class method)">.<strong>cover?</strong>(start_at, end_at = start_at)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Use this on an ActiveRecord::Relation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unavailable-class_method" title="unavailable (class method)">.<strong>unavailable</strong>(rules)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Inverts a set of rules into another set of rules representing the times the
product is unavailable.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unavailable_for_date-class_method" title="unavailable_for_date (class method)">.<strong>unavailable_for_date</strong>(product, day)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#as_calendar_objects-instance_method" title="#as_calendar_objects (instance method)">#<strong>as_calendar_objects</strong>(options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Build weekly calendar hashes Returns an array of hashes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#at_least_one_day_selected-instance_method" title="#at_least_one_day_selected (instance method)">#<strong>at_least_one_day_selected</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cmp_end-instance_method" title="#cmp_end (instance method)">#<strong>cmp_end</strong>(other)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Compare the end time of this with another schedule rule&#39;s.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cmp_start-instance_method" title="#cmp_start (instance method)">#<strong>cmp_start</strong>(other)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Compare the start time of this with another schedule rule&#39;s.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cover%3F-instance_method" title="#cover? (instance method)">#<strong>cover?</strong>(dt)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#days_string-instance_method" title="#days_string (instance method)">#<strong>days_string</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#discount_for-instance_method" title="#discount_for (instance method)">#<strong>discount_for</strong>(start_at, end_at)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#end_time-instance_method" title="#end_time (instance method)">#<strong>end_time</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#end_time_int-instance_method" title="#end_time_int (instance method)">#<strong>end_time_int</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>multiplying by 100 means 8:00 is 800 â€“ it&#39;s time on a clock face minus
the formatting and meridian.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#end_time_is_after_start_time-instance_method" title="#end_time_is_after_start_time (instance method)">#<strong>end_time_is_after_start_time</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#end_time_is_valid-instance_method" title="#end_time_is_valid (instance method)">#<strong>end_time_is_valid</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hour_floor-instance_method" title="#hour_floor (instance method)">#<strong>hour_floor</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>If we&#39;re at, say, 4:00, return 3.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#minutes_overlap-instance_method" title="#minutes_overlap (instance method)">#<strong>minutes_overlap</strong>(start_at, end_at)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#no_conflict_with_existing_reservation-instance_method" title="#no_conflict_with_existing_reservation (instance method)">#<strong>no_conflict_with_existing_reservation</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#no_overlap_with_existing_rules-instance_method" title="#no_overlap_with_existing_rules (instance method)">#<strong>no_overlap_with_existing_rules</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_day%3F-instance_method" title="#on_day? (instance method)">#<strong>on_day?</strong>(datetime)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#percent_overlap-instance_method" title="#percent_overlap (instance method)">#<strong>percent_overlap</strong>(start_at, end_at)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start_time-instance_method" title="#start_time (instance method)">#<strong>start_time</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start_time_int-instance_method" title="#start_time_int (instance method)">#<strong>start_time_int</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="unavailable=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="unavailable-instance_method">
  
    #<strong>unavailable</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>virtual attribute</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 8</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unavailable'>unavailable</span>
  <span class='ivar'>@unavailable</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="as_calendar_objects-class_method">
  
    .<strong>as_calendar_objects</strong>(schedule_rules, options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a single array of calendar objects representing the set of
schedule_rules</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 57</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_as_calendar_objects'>as_calendar_objects</span><span class='lparen'>(</span><span class='id identifier rubyid_schedule_rules'>schedule_rules</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="ScheduleRuleCalendarPresenter.html" title="ScheduleRuleCalendarPresenter (class)">ScheduleRuleCalendarPresenter</a></span></span><span class='period'>.</span><span class='id identifier rubyid_to_json'><span class='object_link'><a href="ScheduleRuleCalendarPresenter.html#to_json-class_method" title="ScheduleRuleCalendarPresenter.to_json (method)">to_json</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_schedule_rules'>schedule_rules</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="available_to_user-class_method">
  
    .<strong>available_to_user</strong>(user)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


17
18
19
20
21
22
23
24
25</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 17</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_available_to_user'>available_to_user</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>product_users:</span> <span class='lbrace'>{</span> <span class='label'>user_id:</span> <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='period'>.</span><span class='id identifier rubyid_joins'>joins</span><span class='lparen'>(</span><span class='label'>product:</span> <span class='symbol'>:product_users</span><span class='rparen'>)</span><span class='period'>.</span>
    <span class='comment'># product doesn&#39;t have any restrictions at all, or has one that matches the product_user
</span>    <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(not EXISTS (SELECT * FROM product_access_schedule_rules WHERE product_access_schedule_rules.schedule_rule_id = schedule_rules.id)
   OR (exists (select * from product_access_schedule_rules
       where product_access_schedule_rules.product_access_group_id = product_users.product_access_group_id
       and product_access_schedule_rules.schedule_rule_id = schedule_rules.id)))</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cover?-class_method">
  
    .<strong>cover?</strong>(start_at, end_at = start_at)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Use this on an ActiveRecord::Relation. Is every minute within the range
covered by one of the rules?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45
46
47
48
49
50
51
52
53
54</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 43</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_cover?'>cover?</span><span class='lparen'>(</span><span class='id identifier rubyid_start_at'>start_at</span><span class='comma'>,</span> <span class='id identifier rubyid_end_at'>end_at</span> <span class='op'>=</span> <span class='id identifier rubyid_start_at'>start_at</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_rule_set'>rule_set</span> <span class='op'>=</span> <span class='id identifier rubyid_all'>all</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>

  <span class='comment'># Time Ranges aren&#39;t iterable, so fake it by creating an array of each minute
</span>  <span class='comment'># beween the two times. If start_at == end_at, the result will be one element.
</span>  <span class='id identifier rubyid_minutes'>minutes</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_end_at'>end_at</span> <span class='op'>-</span> <span class='id identifier rubyid_start_at'>start_at</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='int'>60</span>
  <span class='id identifier rubyid_each_minute_in_range'>each_minute_in_range</span> <span class='op'>=</span> <span class='int'>0</span><span class='period'>.</span><span class='id identifier rubyid_upto'>upto</span><span class='lparen'>(</span><span class='id identifier rubyid_minutes'>minutes</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_n'>n</span><span class='op'>|</span> <span class='id identifier rubyid_start_at'>start_at</span><span class='period'>.</span><span class='id identifier rubyid_advance'>advance</span><span class='lparen'>(</span><span class='label'>minutes:</span> <span class='id identifier rubyid_n'>n</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

  <span class='id identifier rubyid_each_minute_in_range'>each_minute_in_range</span><span class='period'>.</span><span class='id identifier rubyid_all?'>all?</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_time'>time</span><span class='op'>|</span>
    <span class='id identifier rubyid_rule_set'>rule_set</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_rule'>rule</span><span class='op'>|</span> <span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_cover?'>cover?</span> <span class='id identifier rubyid_time'>time</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unavailable-class_method">
  
    .<strong>unavailable</strong>(rules)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Inverts a set of rules into another set of rules representing the times the
product is unavailable.</p>

<p>Example: Input: A set of rules representing every day, available from
9-noon and 1-5. Output: A set of rules for each day, midnight-9, noon-1,
and 5-midnight</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 165</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_unavailable'>unavailable</span><span class='lparen'>(</span><span class='id identifier rubyid_rules'>rules</span><span class='rparen'>)</span>
  <span class='comment'># rules is always a collection
</span>  <span class='id identifier rubyid_rules'>rules</span>     <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_rules'>rules</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_not_rules'>not_rules</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='comment'># group rules by day, sort by start_hour
</span>  <span class='const'>Date</span><span class='op'>::</span><span class='const'>ABBR_DAYNAMES</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_day'>day</span><span class='op'>|</span>
    <span class='id identifier rubyid_day_rules'>day_rules</span> <span class='op'>=</span> <span class='id identifier rubyid_rules'>rules</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_rule'>rule</span><span class='op'>|</span> <span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>on_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>?</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:start_hour</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_day_rules'>day_rules</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
      <span class='comment'># build entire day not rule
</span>      <span class='id identifier rubyid_not_rule'>not_rule</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="ScheduleRule (class)">ScheduleRule</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>on_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:start_hour</span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span> <span class='symbol'>:start_min</span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span> <span class='symbol'>:end_hour</span> <span class='op'>=&gt;</span> <span class='int'>24</span><span class='comma'>,</span> <span class='symbol'>:end_min</span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
                                  <span class='symbol'>:unavailable</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_not_rule'>not_rule</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
      <span class='id identifier rubyid_not_rules'>not_rules</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_not_rule'>not_rule</span><span class='rparen'>)</span>
      <span class='kw'>next</span>
    <span class='kw'>end</span>

    <span class='comment'># build not available rules as contiguous blocks between existing rules
</span>    <span class='id identifier rubyid_not_start_hour'>not_start_hour</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_not_start_min'>not_start_min</span>  <span class='op'>=</span> <span class='int'>0</span>

    <span class='id identifier rubyid_day_rules'>day_rules</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_day_rule'>day_rule</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_day_rule'>day_rule</span><span class='period'>.</span><span class='id identifier rubyid_start_hour'>start_hour</span> <span class='op'>==</span> <span class='id identifier rubyid_not_start_hour'>not_start_hour</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_day_rule'>day_rule</span><span class='period'>.</span><span class='id identifier rubyid_start_min'>start_min</span> <span class='op'>==</span> <span class='id identifier rubyid_not_start_min'>not_start_min</span>
        <span class='comment'># adjust not times, but don&#39;t build a not rule
</span>        <span class='id identifier rubyid_not_start_hour'>not_start_hour</span>  <span class='op'>=</span> <span class='id identifier rubyid_day_rule'>day_rule</span><span class='period'>.</span><span class='id identifier rubyid_end_hour'>end_hour</span>
        <span class='id identifier rubyid_not_start_min'>not_start_min</span>   <span class='op'>=</span> <span class='id identifier rubyid_day_rule'>day_rule</span><span class='period'>.</span><span class='id identifier rubyid_end_min'>end_min</span>
        <span class='kw'>next</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_not_rule'>not_rule</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="ScheduleRule (class)">ScheduleRule</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>on_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:unavailable</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_not_rule'>not_rule</span><span class='period'>.</span><span class='id identifier rubyid_start_hour'>start_hour</span> <span class='op'>=</span> <span class='id identifier rubyid_not_start_hour'>not_start_hour</span>
      <span class='id identifier rubyid_not_rule'>not_rule</span><span class='period'>.</span><span class='id identifier rubyid_start_min'>start_min</span>  <span class='op'>=</span> <span class='id identifier rubyid_not_start_min'>not_start_min</span>
      <span class='id identifier rubyid_not_rule'>not_rule</span><span class='period'>.</span><span class='id identifier rubyid_end_hour'>end_hour</span>   <span class='op'>=</span> <span class='id identifier rubyid_day_rule'>day_rule</span><span class='period'>.</span><span class='id identifier rubyid_start_hour'>start_hour</span>
      <span class='id identifier rubyid_not_rule'>not_rule</span><span class='period'>.</span><span class='id identifier rubyid_end_min'>end_min</span>    <span class='op'>=</span> <span class='id identifier rubyid_day_rule'>day_rule</span><span class='period'>.</span><span class='id identifier rubyid_start_min'>start_min</span>
      <span class='id identifier rubyid_not_start_hour'>not_start_hour</span>      <span class='op'>=</span> <span class='id identifier rubyid_day_rule'>day_rule</span><span class='period'>.</span><span class='id identifier rubyid_end_hour'>end_hour</span>
      <span class='id identifier rubyid_not_start_min'>not_start_min</span>       <span class='op'>=</span> <span class='id identifier rubyid_day_rule'>day_rule</span><span class='period'>.</span><span class='id identifier rubyid_end_min'>end_min</span>
      <span class='id identifier rubyid_not_rule'>not_rule</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
      <span class='id identifier rubyid_not_rules'>not_rules</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_not_rule'>not_rule</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_not_start_hour'>not_start_hour</span> <span class='op'>==</span> <span class='int'>24</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_not_start_min'>not_start_min</span> <span class='op'>==</span> <span class='int'>0</span>
    <span class='comment'># build not rule for last part of day
</span>    <span class='id identifier rubyid_not_rule'>not_rule</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="ScheduleRule (class)">ScheduleRule</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>on_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:unavailable</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_not_rule'>not_rule</span><span class='period'>.</span><span class='id identifier rubyid_start_hour'>start_hour</span> <span class='op'>=</span> <span class='id identifier rubyid_not_start_hour'>not_start_hour</span>
    <span class='id identifier rubyid_not_rule'>not_rule</span><span class='period'>.</span><span class='id identifier rubyid_start_min'>start_min</span>  <span class='op'>=</span> <span class='id identifier rubyid_not_start_min'>not_start_min</span>
    <span class='id identifier rubyid_not_rule'>not_rule</span><span class='period'>.</span><span class='id identifier rubyid_end_hour'>end_hour</span>   <span class='op'>=</span> <span class='int'>24</span>
    <span class='id identifier rubyid_not_rule'>not_rule</span><span class='period'>.</span><span class='id identifier rubyid_end_min'>end_min</span>    <span class='op'>=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_not_rule'>not_rule</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
    <span class='id identifier rubyid_not_rules'>not_rules</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_not_rule'>not_rule</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_not_rules'>not_rules</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unavailable_for_date-class_method">
  
    .<strong>unavailable_for_date</strong>(product, day)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29
30
31
32
33
34
35
36
37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 27</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_unavailable_for_date'>unavailable_for_date</span><span class='lparen'>(</span><span class='id identifier rubyid_product'>product</span><span class='comma'>,</span> <span class='id identifier rubyid_day'>day</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_rules'>rules</span> <span class='op'>=</span> <span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>product_id:</span> <span class='id identifier rubyid_product'>product</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_rules'>rules</span> <span class='op'>=</span> <span class='id identifier rubyid_unavailable'>unavailable</span><span class='lparen'>(</span><span class='id identifier rubyid_rules'>rules</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_rules'>rules</span> <span class='op'>=</span> <span class='id identifier rubyid_rules'>rules</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_rule'>rule</span><span class='op'>|</span> <span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_on_day?'>on_day?</span><span class='lparen'>(</span><span class='id identifier rubyid_day'>day</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_rules'>rules</span><span class='period'>.</span><span class='id identifier rubyid_each_with_object'>each_with_object</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_rule'>rule</span><span class='comma'>,</span> <span class='id identifier rubyid_reservations'>reservations</span><span class='op'>|</span>
    <span class='id identifier rubyid_reservations'>reservations</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="Reservation.html" title="Reservation (class)">Reservation</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
      <span class='label'>product:</span> <span class='id identifier rubyid_product'>product</span><span class='comma'>,</span>
      <span class='label'>reserve_start_at:</span> <span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_change'>change</span><span class='lparen'>(</span><span class='label'>hour:</span> <span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_start_hour'>start_hour</span><span class='comma'>,</span> <span class='label'>min:</span> <span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_start_min'>start_min</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='label'>reserve_end_at:</span> <span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_change'>change</span><span class='lparen'>(</span><span class='label'>hour:</span> <span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_end_hour'>end_hour</span><span class='comma'>,</span> <span class='label'>min:</span> <span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_end_min'>end_min</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='label'>blackout:</span> <span class='kw'>true</span><span class='comma'>,</span>
    <span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="as_calendar_objects-instance_method">
  
    #<strong>as_calendar_objects</strong>(options = {})  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Build weekly calendar hashes Returns an array of hashes. A Mon-Fri 9-5 rule
would return 5 hashes, one for each day.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 151</span>

<span class='kw'>def</span> <span class='id identifier rubyid_as_calendar_objects'>as_calendar_objects</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="ScheduleRuleCalendarPresenter.html" title="ScheduleRuleCalendarPresenter (class)">ScheduleRuleCalendarPresenter</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="ScheduleRuleCalendarPresenter.html#initialize-instance_method" title="ScheduleRuleCalendarPresenter#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_json'><span class='object_link'><a href="ScheduleRuleCalendarPresenter.html#to_json-class_method" title="ScheduleRuleCalendarPresenter.to_json (method)">to_json</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="at_least_one_day_selected-instance_method">
  
    #<strong>at_least_one_day_selected</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61
62
63
64</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 61</span>

<span class='kw'>def</span> <span class='id identifier rubyid_at_least_one_day_selected'>at_least_one_day_selected</span>
  <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='symbol'>:base</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Please select at least one day</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span>
    <span class='id identifier rubyid_on_sun?'>on_sun?</span> <span class='op'>||</span> <span class='id identifier rubyid_on_mon?'>on_mon?</span> <span class='op'>||</span> <span class='id identifier rubyid_on_tue?'>on_tue?</span> <span class='op'>||</span> <span class='id identifier rubyid_on_wed?'>on_wed?</span> <span class='op'>||</span> <span class='id identifier rubyid_on_thu?'>on_thu?</span> <span class='op'>||</span> <span class='id identifier rubyid_on_fri?'>on_fri?</span> <span class='op'>||</span> <span class='id identifier rubyid_on_sat?'>on_sat?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cmp_end-instance_method">
  
    #<strong>cmp_end</strong>(other)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Compare the end time of this with another schedule rule&#39;s</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 125</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cmp_end'>cmp_end</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_end_time_int'>end_time_int</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_end_time_int'>end_time_int</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cmp_start-instance_method">
  
    #<strong>cmp_start</strong>(other)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Compare the start time of this with another schedule rule&#39;s</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


120
121
122</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 120</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cmp_start'>cmp_start</span><span class='lparen'>(</span><span class='id identifier rubyid_other'>other</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_start_time_int'>start_time_int</span> <span class='op'>&lt;=&gt;</span> <span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_start_time_int'>start_time_int</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cover?-instance_method">
  
    #<strong>cover?</strong>(dt)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143
144
145
146</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 141</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cover?'>cover?</span><span class='lparen'>(</span><span class='id identifier rubyid_dt'>dt</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id identifier rubyid_on_day?'>on_day?</span><span class='lparen'>(</span><span class='id identifier rubyid_dt'>dt</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_dt_int'>dt_int</span> <span class='op'>=</span> <span class='id identifier rubyid_dt'>dt</span><span class='period'>.</span><span class='id identifier rubyid_hour'>hour</span> <span class='op'>*</span> <span class='int'>100</span> <span class='op'>+</span> <span class='id identifier rubyid_dt'>dt</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span>
  <span class='id identifier rubyid_dt_int'>dt_int</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_start_time_int'>start_time_int</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_dt_int'>dt_int</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_end_time_int'>end_time_int</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="days_string-instance_method">
  
    #<strong>days_string</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103
104
105
106
107</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 101</span>

<span class='kw'>def</span> <span class='id identifier rubyid_days_string'>days_string</span>
  <span class='id identifier rubyid_days'>days</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='const'>Date</span><span class='op'>::</span><span class='const'>ABBR_DAYNAMES</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_day'>day</span><span class='op'>|</span>
    <span class='id identifier rubyid_days'>days</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_day'>day</span> <span class='kw'>if</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>on_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>?</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_days'>days</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="discount_for-instance_method">
  
    #<strong>discount_for</strong>(start_at, end_at)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


155
156
157</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 155</span>

<span class='kw'>def</span> <span class='id identifier rubyid_discount_for'>discount_for</span><span class='lparen'>(</span><span class='id identifier rubyid_start_at'>start_at</span><span class='comma'>,</span> <span class='id identifier rubyid_end_at'>end_at</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_percent_overlap'>percent_overlap</span><span class='lparen'>(</span><span class='id identifier rubyid_start_at'>start_at</span><span class='comma'>,</span> <span class='id identifier rubyid_end_at'>end_at</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='id identifier rubyid_discount_percent'>discount_percent</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="end_time-instance_method">
  
    #<strong>end_time</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


133
134
135</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 133</span>

<span class='kw'>def</span> <span class='id identifier rubyid_end_time'>end_time</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_end_hour'>end_hour</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sprintf'>sprintf</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%02d</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_end_min'>end_min</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="end_time_int-instance_method">
  
    #<strong>end_time_int</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>multiplying by 100 means 8:00 is 800 â€“ it&#39;s time on a clock face minus
the formatting and meridian</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


115
116
117</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 115</span>

<span class='kw'>def</span> <span class='id identifier rubyid_end_time_int'>end_time_int</span>
  <span class='id identifier rubyid_end_hour'>end_hour</span> <span class='op'>*</span> <span class='int'>100</span> <span class='op'>+</span> <span class='id identifier rubyid_end_min'>end_min</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="end_time_is_after_start_time-instance_method">
  
    #<strong>end_time_is_after_start_time</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68
69</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 66</span>

<span class='kw'>def</span> <span class='id identifier rubyid_end_time_is_after_start_time'>end_time_is_after_start_time</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_start_hour'>start_hour</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_end_hour'>end_hour</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_start_min'>start_min</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_end_min'>end_min</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='symbol'>:base</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>End time must be after start time</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_end_hour'>end_hour</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_start_hour'>start_hour</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id identifier rubyid_end_hour'>end_hour</span> <span class='op'>==</span> <span class='id identifier rubyid_start_hour'>start_hour</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_end_min'>end_min</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_start_min'>start_min</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="end_time_is_valid-instance_method">
  
    #<strong>end_time_is_valid</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71
72
73
74
75</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 71</span>

<span class='kw'>def</span> <span class='id identifier rubyid_end_time_is_valid'>end_time_is_valid</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_end_hour'>end_hour</span> <span class='op'>==</span> <span class='int'>24</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_end_min'>end_min</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>!=</span> <span class='int'>0</span>
    <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='symbol'>:base</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>End time is invalid</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="hour_floor-instance_method">
  
    #<strong>hour_floor</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>If we&#39;re at, say, 4:00, return 3. If we&#39;re at 4:01, return 4.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


220
221
222</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 220</span>

<span class='kw'>def</span> <span class='id identifier rubyid_hour_floor'>hour_floor</span>
  <span class='id identifier rubyid_end_min'>end_min</span> <span class='op'>==</span> <span class='int'>0</span> <span class='op'>?</span> <span class='id identifier rubyid_end_hour'>end_hour</span> <span class='op'>-</span> <span class='int'>1</span> <span class='op'>:</span> <span class='id identifier rubyid_end_hour'>end_hour</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="minutes_overlap-instance_method">
  
    #<strong>minutes_overlap</strong>(start_at, end_at)  &#x21d2; <tt>Object</tt>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


237
238
239
240
241
242
243
244
245
246
247</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 237</span>

<span class='kw'>def</span> <span class='id identifier rubyid_minutes_overlap'>minutes_overlap</span><span class='lparen'>(</span><span class='id identifier rubyid_start_at'>start_at</span><span class='comma'>,</span> <span class='id identifier rubyid_end_at'>end_at</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_overlap_mins'>overlap_mins</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='comment'># TODO: rewrite to be more efficient; don&#39;t iterate over every minute
</span>  <span class='kw'>while</span> <span class='id identifier rubyid_start_at'>start_at</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_end_at'>end_at</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_start_at'>start_at</span><span class='period'>.</span><span class='id identifier rubyid_hour'>hour</span> <span class='op'>*</span> <span class='int'>100</span> <span class='op'>+</span> <span class='id identifier rubyid_start_at'>start_at</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_start_time_int'>start_time_int</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_start_at'>start_at</span><span class='period'>.</span><span class='id identifier rubyid_hour'>hour</span> <span class='op'>*</span> <span class='int'>100</span> <span class='op'>+</span> <span class='id identifier rubyid_start_at'>start_at</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_end_time_int'>end_time_int</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_on_day?'>on_day?</span><span class='lparen'>(</span><span class='id identifier rubyid_start_at'>start_at</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_overlap_mins'>overlap_mins</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_start_at'>start_at</span> <span class='op'>+=</span> <span class='int'>60</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_overlap_mins'>overlap_mins</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="no_conflict_with_existing_reservation-instance_method">
  
    #<strong>no_conflict_with_existing_reservation</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


96
97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 96</span>

<span class='kw'>def</span> <span class='id identifier rubyid_no_conflict_with_existing_reservation'>no_conflict_with_existing_reservation</span>
  <span class='comment'># TODO: implement me
</span>  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="no_overlap_with_existing_rules-instance_method">
  
    #<strong>no_overlap_with_existing_rules</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 77</span>

<span class='kw'>def</span> <span class='id identifier rubyid_no_overlap_with_existing_rules'>no_overlap_with_existing_rules</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id identifier rubyid_product'>product</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
  <span class='id identifier rubyid_rules'>rules</span> <span class='op'>=</span> <span class='id identifier rubyid_product'>product</span><span class='period'>.</span><span class='id identifier rubyid_schedule_rules'>schedule_rules</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span> <span class='op'>==</span> <span class='id identifier rubyid_id'>id</span> <span class='rbrace'>}</span> <span class='comment'># select all rules except self
</span>  <span class='const'>Date</span><span class='op'>::</span><span class='const'>ABBR_DAYNAMES</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_day'>day</span><span class='op'>|</span>
    <span class='comment'># skip unless this rule occurs on this day
</span>    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>on_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>?</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='comment'># check all existing rules for this day
</span>    <span class='id identifier rubyid_rules'>rules</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_r'>r</span><span class='op'>|</span> <span class='id identifier rubyid_r'>r</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>on_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_day'>day</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>?</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_rule'>rule</span><span class='op'>|</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_start_time_int'>start_time_int</span> <span class='op'>==</span> <span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_end_time_int'>end_time_int</span> <span class='op'>||</span> <span class='id identifier rubyid_end_time_int'>end_time_int</span> <span class='op'>==</span> <span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_start_time_int'>start_time_int</span> <span class='comment'># start and end times may touch
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_start_time_int'>start_time_int</span><span class='period'>.</span><span class='id identifier rubyid_between?'>between?</span><span class='lparen'>(</span><span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_start_time_int'>start_time_int</span><span class='comma'>,</span> <span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_end_time_int'>end_time_int</span><span class='rparen'>)</span> <span class='op'>||</span>
         <span class='id identifier rubyid_end_time_int'>end_time_int</span><span class='period'>.</span><span class='id identifier rubyid_between?'>between?</span><span class='lparen'>(</span><span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_start_time_int'>start_time_int</span><span class='comma'>,</span> <span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_end_time_int'>end_time_int</span><span class='rparen'>)</span> <span class='op'>||</span>
         <span class='lparen'>(</span><span class='id identifier rubyid_start_time_int'>start_time_int</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_start_time_int'>start_time_int</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_end_time_int'>end_time_int</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_rule'>rule</span><span class='period'>.</span><span class='id identifier rubyid_end_time_int'>end_time_int</span><span class='rparen'>)</span>
        <span class='comment'># overlap
</span>        <span class='id identifier rubyid_errors'>errors</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='symbol'>:base</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>This rule conflicts with an existing rule on </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_day'>day</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_day?-instance_method">
  
    #<strong>on_day?</strong>(datetime)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


137
138
139</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 137</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_day?'>on_day?</span><span class='lparen'>(</span><span class='id identifier rubyid_datetime'>datetime</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_public_send'>public_send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>%(</span><span class='tstring_content'>on_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_datetime'>datetime</span><span class='period'>.</span><span class='id identifier rubyid_strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%a</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='embexpr_end'>}</span><span class='tstring_content'>?</span><span class='tstring_end'>)</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="percent_overlap-instance_method">
  
    #<strong>percent_overlap</strong>(start_at, end_at)  &#x21d2; <tt>Object</tt>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


226
227
228
229
230
231
232
233
234
235</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 226</span>

<span class='kw'>def</span> <span class='id identifier rubyid_percent_overlap'>percent_overlap</span><span class='lparen'>(</span><span class='id identifier rubyid_start_at'>start_at</span><span class='comma'>,</span> <span class='id identifier rubyid_end_at'>end_at</span><span class='rparen'>)</span>
  <span class='comment'># Strip off seconds
</span>  <span class='id identifier rubyid_start_at'>start_at</span> <span class='op'>=</span> <span class='id identifier rubyid_start_at'>start_at</span><span class='period'>.</span><span class='id identifier rubyid_change'>change</span><span class='lparen'>(</span><span class='label'>sec:</span> <span class='int'>0</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_end_at'>end_at</span> <span class='op'>=</span> <span class='id identifier rubyid_end_at'>end_at</span><span class='period'>.</span><span class='id identifier rubyid_change'>change</span><span class='lparen'>(</span><span class='label'>sec:</span> <span class='int'>0</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='int'>0</span> <span class='kw'>unless</span> <span class='id identifier rubyid_end_at'>end_at</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_start_at'>start_at</span>
  <span class='id identifier rubyid_total_mins'>total_mins</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="TimeRange.html" title="TimeRange (class)">TimeRange</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="TimeRange.html#initialize-instance_method" title="TimeRange#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_start_at'>start_at</span><span class='comma'>,</span> <span class='id identifier rubyid_end_at'>end_at</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_duration_mins'><span class='object_link'><a href="TimeRange.html#duration_mins-instance_method" title="TimeRange#duration_mins (method)">duration_mins</a></span></span>

  <span class='id identifier rubyid_minutes_overlap'>minutes_overlap</span><span class='lparen'>(</span><span class='id identifier rubyid_start_at'>start_at</span><span class='comma'>,</span> <span class='id identifier rubyid_end_at'>end_at</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_fdiv'>fdiv</span> <span class='id identifier rubyid_total_mins'>total_mins</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="start_time-instance_method">
  
    #<strong>start_time</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 129</span>

<span class='kw'>def</span> <span class='id identifier rubyid_start_time'>start_time</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_start_hour'>start_hour</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_sprintf'>sprintf</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%02d</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_start_min'>start_min</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="start_time_int-instance_method">
  
    #<strong>start_time_int</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


109
110
111</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/schedule_rule.rb', line 109</span>

<span class='kw'>def</span> <span class='id identifier rubyid_start_time_int'>start_time_int</span>
  <span class='id identifier rubyid_start_hour'>start_hour</span> <span class='op'>*</span> <span class='int'>100</span> <span class='op'>+</span> <span class='id identifier rubyid_start_min'>start_min</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Apr 13 09:52:00 2018 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.12 (ruby-2.4.1).
</div>

    </div>
  </body>
</html>