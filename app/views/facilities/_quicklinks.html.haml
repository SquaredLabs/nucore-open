.quick_links 
  .add_to_cart
    - if not session_user
      = link_to text("add_to_cart") + ' ' + text("require_login"), new_user_session_path
    - elsif session_user.can_override_restrictions?(product) || product.can_be_used_by?(acting_user)
      - if session_user.accounts.any?
        = link_to text("add_to_cart"), add_order_path(acting_user.cart(session_user), order: {order_details: [{product_id: product.id, quantity: 1}] }), method: :put
      - else
        .label.label-important= text("no_payment")
    - else
      .label.label-important= text("cannot_purchase")
  %li{class: [product.class.model_name.to_s.downcase, 'view_product']}
    = public_calendar_link(product, indent: indent_for_icon)
    = link_to text("view") + (product.is_hidden? ? ' (hidden)' : ''), facility_product_path(current_facility || product.facility, product), :id => product.name
    - if acting_user.present? && !product.can_be_used_by?(acting_user)
      %i.fa.fa-lock
      = " (#{product.class.human_attribute_name(:requires_approval_show)})"

      - if product.offline?
        = tooltip_icon "fa fa-exclamation-triangle icon-large", t("instruments.offline.note")
